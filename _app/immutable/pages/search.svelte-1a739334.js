import{S as qe,i as Fe,s as He,l as m,u as T,a as I,e as pe,m as v,p as b,v as P,h as n,c as U,q as d,b as M,G as l,U as te,N as Z,V as ye,f as de,t as be,d as ze,R as we,K as Ve,x as Ge,y as Xe,z as Ke,C as Me,g as Qe,n as We,w as le,X as De}from"../chunks/index-621a1bb0.js";import{P as Ye}from"../chunks/PokemonApiService-1b5e6158.js";import{p as Je}from"../chunks/stores-f7a11356.js";import{p as Ze}from"../chunks/lodash-4138efbc.js";import{g as $e}from"../chunks/navigation-e4734af4.js";import{b as xe}from"../chunks/paths-b9644fda.js";import{L as et}from"../chunks/LoadingIcon-a0a29feb.js";import"../chunks/singletons-eca981c1.js";const tt=a=>{const t=new URL(window.location.toString());for(let[e,s]of Object.entries(a))s?t.searchParams.set(encodeURIComponent(e),encodeURIComponent(s)):t.searchParams.delete(e);history.replaceState({},"",t)};function Be(a,t,e){const s=a.slice();return s[22]=t[e][0],s[23]=t[e][1],s}function Ie(a,t,e){const s=a.slice();return s[26]=t[e],s}function Ue(a){let t,e;return t=new et({}),{c(){Ge(t.$$.fragment)},l(s){Xe(t.$$.fragment,s)},m(s,C){Ke(t,s,C),e=!0},i(s){e||(de(t.$$.fragment,s),e=!0)},o(s){be(t.$$.fragment,s),e=!1},d(s){Me(t,s)}}}function lt(a){let t;return{c(){t=T("No results found")},l(e){t=P(e,"No results found")},m(e,s){M(e,t,s)},p:We,d(e){e&&n(t)}}}function at(a){let t,e,s,C,E,u,N,c,f,h,r,p,j,w,F,k,V,L,D,S,O,y,G,$,X,Q,_,W,x,K,g,se,Y,q,o,A,R,oe,ae,re,J,ne,he,me,ge,fe=Object.entries(a[1]),z=[];for(let i=0;i<fe.length;i+=1)z[i]=Le(Be(a,fe,i));return{c(){t=m("div"),e=m("button"),s=T("Previous"),E=I(),u=m("span"),N=T("Page "),c=T(a[5]),f=T(" of "),h=T(a[2]),r=I(),p=m("button"),j=T("Next"),F=I(),k=m("table"),V=m("thead"),L=m("tr"),D=m("th"),S=T("Name"),O=I(),y=m("th"),G=T("Flavor text"),$=I(),X=m("th"),Q=T("Attacks"),_=I(),W=m("tbody");for(let i=0;i<z.length;i+=1)z[i].c();x=I(),K=m("div"),g=m("button"),se=T("Previous"),q=I(),o=m("span"),A=T("Page "),R=T(a[5]),oe=T(" of "),ae=T(a[2]),re=I(),J=m("button"),ne=T("Next"),this.h()},l(i){t=v(i,"DIV",{class:!0});var B=b(t);e=v(B,"BUTTON",{});var H=b(e);s=P(H,"Previous"),H.forEach(n),E=U(B),u=v(B,"SPAN",{});var ee=b(u);N=P(ee,"Page "),c=P(ee,a[5]),f=P(ee," of "),h=P(ee,a[2]),ee.forEach(n),r=U(B),p=v(B,"BUTTON",{});var ke=b(p);j=P(ke,"Next"),ke.forEach(n),B.forEach(n),F=U(i),k=v(i,"TABLE",{class:!0});var _e=b(k);V=v(_e,"THEAD",{});var Ee=b(V);L=v(Ee,"TR",{});var ie=b(L);D=v(ie,"TH",{class:!0});var Te=b(D);S=P(Te,"Name"),Te.forEach(n),O=U(ie),y=v(ie,"TH",{class:!0});var Pe=b(y);G=P(Pe,"Flavor text"),Pe.forEach(n),$=U(ie),X=v(ie,"TH",{class:!0});var Ne=b(X);Q=P(Ne,"Attacks"),Ne.forEach(n),ie.forEach(n),Ee.forEach(n),_=U(_e),W=v(_e,"TBODY",{});var je=b(W);for(let ve=0;ve<z.length;ve+=1)z[ve].l(je);je.forEach(n),_e.forEach(n),x=U(i),K=v(i,"DIV",{class:!0});var ue=b(K);g=v(ue,"BUTTON",{});var Se=b(g);se=P(Se,"Previous"),Se.forEach(n),q=U(ue),o=v(ue,"SPAN",{});var ce=b(o);A=P(ce,"Page "),R=P(ce,a[5]),oe=P(ce," of "),ae=P(ce,a[2]),ce.forEach(n),re=U(ue),J=v(ue,"BUTTON",{});var Ae=b(J);ne=P(Ae,"Next"),Ae.forEach(n),ue.forEach(n),this.h()},h(){e.disabled=C=a[5]<=1,p.disabled=w=a[5]>=a[2],d(t,"class","page-number-selector svelte-1jl64t2"),d(D,"class","svelte-1jl64t2"),d(y,"class","svelte-1jl64t2"),d(X,"class","svelte-1jl64t2"),d(k,"class","svelte-1jl64t2"),g.disabled=Y=a[5]<=1,J.disabled=he=a[5]>=a[2],d(K,"class","page-number-selector svelte-1jl64t2")},m(i,B){M(i,t,B),l(t,e),l(e,s),l(t,E),l(t,u),l(u,N),l(u,c),l(u,f),l(u,h),l(t,r),l(t,p),l(p,j),M(i,F,B),M(i,k,B),l(k,V),l(V,L),l(L,D),l(D,S),l(L,O),l(L,y),l(y,G),l(L,$),l(L,X),l(X,Q),l(k,_),l(k,W);for(let H=0;H<z.length;H+=1)z[H].m(W,null);M(i,x,B),M(i,K,B),l(K,g),l(g,se),l(K,q),l(K,o),l(o,A),l(o,R),l(o,oe),l(o,ae),l(K,re),l(K,J),l(J,ne),me||(ge=[Z(e,"click",a[12]),Z(p,"click",a[11]),Z(g,"click",a[12]),Z(J,"click",a[11])],me=!0)},p(i,B){if(B&32&&C!==(C=i[5]<=1)&&(e.disabled=C),B&32&&le(c,i[5]),B&4&&le(h,i[2]),B&36&&w!==(w=i[5]>=i[2])&&(p.disabled=w),B&2){fe=Object.entries(i[1]);let H;for(H=0;H<fe.length;H+=1){const ee=Be(i,fe,H);z[H]?z[H].p(ee,B):(z[H]=Le(ee),z[H].c(),z[H].m(W,null))}for(;H<z.length;H+=1)z[H].d(1);z.length=fe.length}B&32&&Y!==(Y=i[5]<=1)&&(g.disabled=Y),B&32&&le(R,i[5]),B&4&&le(ae,i[2]),B&36&&he!==(he=i[5]>=i[2])&&(J.disabled=he)},d(i){i&&n(t),i&&n(F),i&&n(k),De(z,i),i&&n(x),i&&n(K),me=!1,we(ge)}}}function Ce(a){var V,L;let t,e,s=a[26].name+"",C,E,u,N=a[26].flavorText+"",c,f,h,r=(((L=(V=a[26])==null?void 0:V.attacks)==null?void 0:L.map(Oe).reduce(Re))||"")+"",p,j,w,F;function k(){return a[17](a[26])}return{c(){t=m("tr"),e=m("td"),C=T(s),E=I(),u=m("td"),c=T(N),f=I(),h=m("td"),p=T(r),j=I(),this.h()},l(D){t=v(D,"TR",{class:!0});var S=b(t);e=v(S,"TD",{class:!0});var O=b(e);C=P(O,s),O.forEach(n),E=U(S),u=v(S,"TD",{class:!0});var y=b(u);c=P(y,N),y.forEach(n),f=U(S),h=v(S,"TD",{class:!0});var G=b(h);p=P(G,r),G.forEach(n),j=U(S),S.forEach(n),this.h()},h(){d(e,"class","svelte-1jl64t2"),d(u,"class","svelte-1jl64t2"),d(h,"class","svelte-1jl64t2"),d(t,"class","clickable svelte-1jl64t2")},m(D,S){M(D,t,S),l(t,e),l(e,C),l(t,E),l(t,u),l(u,c),l(t,f),l(t,h),l(h,p),l(t,j),w||(F=Z(t,"click",k),w=!0)},p(D,S){var O,y;a=D,S&2&&s!==(s=a[26].name+"")&&le(C,s),S&2&&N!==(N=a[26].flavorText+"")&&le(c,N),S&2&&r!==(r=(((y=(O=a[26])==null?void 0:O.attacks)==null?void 0:y.map(Oe).reduce(Re))||"")+"")&&le(p,r)},d(D){D&&n(t),w=!1,F()}}}function Le(a){let t,e,s=a[22]+"",C,E,u,N=a[23],c=[];for(let f=0;f<N.length;f+=1)c[f]=Ce(Ie(a,N,f));return{c(){t=m("tr"),e=m("th"),C=T(s),E=I();for(let f=0;f<c.length;f+=1)c[f].c();u=pe(),this.h()},l(f){t=v(f,"TR",{});var h=b(t);e=v(h,"TH",{colspan:!0,class:!0});var r=b(e);C=P(r,s),r.forEach(n),h.forEach(n),E=U(f);for(let p=0;p<c.length;p+=1)c[p].l(f);u=pe(),this.h()},h(){d(e,"colspan","3"),d(e,"class","svelte-1jl64t2")},m(f,h){M(f,t,h),l(t,e),l(e,C),M(f,E,h);for(let r=0;r<c.length;r+=1)c[r].m(f,h);M(f,u,h)},p(f,h){if(h&2&&s!==(s=f[22]+"")&&le(C,s),h&2){N=f[23];let r;for(r=0;r<N.length;r+=1){const p=Ie(f,N,r);c[r]?c[r].p(p,h):(c[r]=Ce(p),c[r].c(),c[r].m(u.parentNode,u))}for(;r<c.length;r+=1)c[r].d(1);c.length=N.length}},d(f){f&&n(t),f&&n(E),De(c,f),f&&n(u)}}}function st(a){let t,e,s,C,E,u,N,c,f,h,r,p,j,w,F,k,V,L,D,S,O,y,G,$,X,Q,_,W,x,K,g=a[4]&&Ue();function se(o,A){if(o[3]&&o[0]&&o[0].totalCount>0)return at;if(o[3])return lt}let Y=se(a),q=Y&&Y(a);return{c(){t=m("form"),e=m("div"),s=m("label"),C=T("Name:"),E=I(),u=m("input"),N=I(),c=m("label"),f=T("Attack name:"),h=I(),r=m("input"),p=I(),j=m("label"),w=T("Set:"),F=I(),k=m("input"),V=I(),L=m("label"),D=T("Flavor text:"),S=I(),O=m("textarea"),y=I(),G=m("button"),$=T("Search"),X=I(),g&&g.c(),Q=I(),q&&q.c(),_=pe(),this.h()},l(o){t=v(o,"FORM",{});var A=b(t);e=v(A,"DIV",{class:!0});var R=b(e);s=v(R,"LABEL",{for:!0,class:!0});var oe=b(s);C=P(oe,"Name:"),oe.forEach(n),E=U(R),u=v(R,"INPUT",{id:!0,placeholder:!0,class:!0}),N=U(R),c=v(R,"LABEL",{for:!0,class:!0});var ae=b(c);f=P(ae,"Attack name:"),ae.forEach(n),h=U(R),r=v(R,"INPUT",{id:!0,placeholder:!0,class:!0}),p=U(R),j=v(R,"LABEL",{for:!0,class:!0});var re=b(j);w=P(re,"Set:"),re.forEach(n),F=U(R),k=v(R,"INPUT",{id:!0,placeholder:!0,class:!0}),V=U(R),L=v(R,"LABEL",{for:!0,class:!0});var J=b(L);D=P(J,"Flavor text:"),J.forEach(n),S=U(R),O=v(R,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),b(O).forEach(n),R.forEach(n),y=U(A),G=v(A,"BUTTON",{class:!0});var ne=b(G);$=P(ne,"Search"),ne.forEach(n),A.forEach(n),X=U(o),g&&g.l(o),Q=U(o),q&&q.l(o),_=pe(),this.h()},h(){d(s,"for","name"),d(s,"class","field svelte-1jl64t2"),d(u,"id","name"),d(u,"placeholder","Pikachu"),d(u,"class","svelte-1jl64t2"),d(c,"for","attack-name"),d(c,"class","field svelte-1jl64t2"),d(r,"id","attack-name"),d(r,"placeholder","Pika punch"),d(r,"class","svelte-1jl64t2"),d(j,"for","set"),d(j,"class","field svelte-1jl64t2"),d(k,"id","set"),d(k,"placeholder","Stormfront"),d(k,"class","svelte-1jl64t2"),d(L,"for","flavor-text"),d(L,"class","field svelte-1jl64t2"),d(O,"id","flavor-text"),d(O,"placeholder","It lives in forests with others"),d(O,"class","svelte-1jl64t2"),d(e,"class","form-grid svelte-1jl64t2"),d(G,"class","button-red-small submit svelte-1jl64t2")},m(o,A){M(o,t,A),l(t,e),l(e,s),l(s,C),l(e,E),l(e,u),te(u,a[6]),l(e,N),l(e,c),l(c,f),l(e,h),l(e,r),te(r,a[7]),l(e,p),l(e,j),l(j,w),l(e,F),l(e,k),te(k,a[8]),l(e,V),l(e,L),l(L,D),l(e,S),l(e,O),te(O,a[9]),l(t,y),l(t,G),l(G,$),M(o,X,A),g&&g.m(o,A),M(o,Q,A),q&&q.m(o,A),M(o,_,A),W=!0,x||(K=[Z(u,"input",a[13]),Z(r,"input",a[14]),Z(k,"input",a[15]),Z(O,"input",a[16]),Z(t,"submit",ye(a[10]))],x=!0)},p(o,[A]){A&64&&u.value!==o[6]&&te(u,o[6]),A&128&&r.value!==o[7]&&te(r,o[7]),A&256&&k.value!==o[8]&&te(k,o[8]),A&512&&te(O,o[9]),o[4]?g?A&16&&de(g,1):(g=Ue(),g.c(),de(g,1),g.m(Q.parentNode,Q)):g&&(Qe(),be(g,1,1,()=>{g=null}),ze()),Y===(Y=se(o))&&q?q.p(o,A):(q&&q.d(1),q=Y&&Y(o),q&&(q.c(),q.m(_.parentNode,_)))},i(o){W||(de(g),W=!0)},o(o){be(g),W=!1},d(o){o&&n(t),o&&n(X),g&&g.d(o),o&&n(Q),q&&q.d(o),o&&n(_),x=!1,we(K)}}}const dt=!1,Oe=a=>a.name,Re=(a,t)=>a+", "+t;function ot(a,t,e){var X,Q;let s;Ve(a,Je,_=>e(18,s=_));const{groupBy:C}=Ze;let{pageContents:E}=t,u,N,c=!1,f=!1,h=parseInt((X=s.url.searchParams.get("page"))!=null?X:"1"),r=parseInt((Q=s.url.searchParams.get("pageSize"))!=null?Q:"20"),p=s.url.searchParams.get("name"),j=s.url.searchParams.get("attackName"),w=s.url.searchParams.get("set"),F=s.url.searchParams.get("flavorText");console.log(h);function k(){let _={};h!==1&&(_.page=h),r!==20&&(_.pageSize=r),p&&(_.name=p),j&&(_.attackName=j),w&&(_.set=w),F&&(_.flavorText=F),typeof window<"u"&&tt(_),e(4,f=!0),Ye.getCardPage({page:h,pageSize:r,name:p,attackName:j,set:w,flavorText:F}).then(W=>{e(0,E=W),e(3,c=!0),e(4,f=!1)})}function V(_){e(5,h=_),console.log("Go to "+_),k()}function L(){console.log("next"),V(h+1)}function D(){console.log("prev"),V(h-1)}(p||j||w||F||h!==1)&&k();function S(){p=this.value,e(6,p)}function O(){j=this.value,e(7,j)}function y(){w=this.value,e(8,w)}function G(){F=this.value,e(9,F)}const $=_=>$e(xe+"/guess/"+btoa(_.id));return a.$$set=_=>{"pageContents"in _&&e(0,E=_.pageContents)},a.$$.update=()=>{if(a.$$.dirty&1&&(E?e(1,u=C(E.data,_=>`${_.set.series} - ${_.set.name}`)):e(1,u={})),a.$$.dirty&1&&E){let _=parseInt(E.totalCount/r);E.totalCount%r&&_++,e(2,N=_)}},[E,u,N,c,f,h,p,j,w,F,k,L,D,S,O,y,G,$]}class pt extends qe{constructor(t){super(),Fe(this,t,ot,st,He,{pageContents:0})}}export{pt as default,dt as prerender};
