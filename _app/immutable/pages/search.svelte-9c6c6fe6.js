import{S as Xe,i as Je,s as Ke,l as h,r as S,a as O,e as Te,m as d,n as g,u as A,h as c,c as C,p as f,b as ee,F as l,T as se,G as $,U as Ze,f as de,t as be,d as we,R as Ge,W as xe,o as $e,w as et,x as tt,y as lt,B as at,g as Fe,E as Se,v as ne,N as st,O as qe,Y as Qe}from"../chunks/index-f8c949a3.js";import{P as nt}from"../chunks/PokemonApiService-8b675361.js";import{p as rt}from"../chunks/stores-d091d963.js";import{p as ot}from"../chunks/lodash-2cb91f17.js";import{g as ct,f as ye}from"../chunks/index-30ebe04c.js";import{b as ut}from"../chunks/paths-b9644fda.js";import{L as ft}from"../chunks/LoadingIcon-cafd759b.js";import"../chunks/singletons-eca981c1.js";const it=t=>{const a=new URL(window.location.toString());for(let[e,s]of Object.entries(t))s?a.searchParams.set(encodeURIComponent(e),encodeURIComponent(s)):a.searchParams.delete(e);history.replaceState({},"",a)};function He(t,a,e){const s=t.slice();return s[23]=a[e][0],s[24]=a[e][1],s}function Ve(t,a,e){const s=t.slice();return s[27]=a[e],s}function je(t){let a,e;return a=new ft({props:{position:"relative"}}),{c(){et(a.$$.fragment)},l(s){tt(a.$$.fragment,s)},m(s,F){lt(a,s,F),e=!0},i(s){e||(de(a.$$.fragment,s),e=!0)},o(s){be(a.$$.fragment,s),e=!1},d(s){at(a,s)}}}function _t(t){let a;return{c(){a=S("No results found")},l(e){a=A(e,"No results found")},m(e,s){ee(e,a,s)},p:Se,i:Se,o:Se,d(e){e&&c(a)}}}function ht(t){let a,e,s,F,E,p,k,i,r,_,n,b,m,R,D,q,z,H,U,T,w,W,j,te,x,u,N,y,G,le,Y,Q,B,re,X,Z,o,P,I,oe,ue,J,fe,ce,ae,K,Ne,Ae,ie=Object.entries(t[1]),M=[];for(let v=0;v<ie.length;v+=1)M[v]=Me(He(t,ie,v));return{c(){a=h("div"),e=h("div"),s=h("button"),F=S("Previous"),p=O(),k=h("span"),i=S("Page "),r=S(t[5]),_=S(" of "),n=S(t[2]),b=O(),m=h("button"),R=S("Next"),q=O(),z=h("table"),H=h("thead"),U=h("tr"),T=h("th"),w=S("Name"),W=O(),j=h("th"),te=S("Flavor text"),x=O(),u=h("th"),N=S("Attacks"),y=O(),G=h("tbody");for(let v=0;v<M.length;v+=1)M[v].c();le=O(),Y=h("div"),Q=h("button"),B=S("Previous"),X=O(),Z=h("span"),o=S("Page "),P=S(t[5]),I=S(" of "),oe=S(t[2]),ue=O(),J=h("button"),fe=S("Next"),this.h()},l(v){a=d(v,"DIV",{});var V=g(a);e=d(V,"DIV",{class:!0});var L=g(e);s=d(L,"BUTTON",{class:!0});var pe=g(s);F=A(pe,"Previous"),pe.forEach(c),p=C(L),k=d(L,"SPAN",{});var me=g(k);i=A(me,"Page "),r=A(me,t[5]),_=A(me," of "),n=A(me,t[2]),me.forEach(c),b=C(L),m=d(L,"BUTTON",{class:!0});var Ie=g(m);R=A(Ie,"Next"),Ie.forEach(c),L.forEach(c),q=C(V),z=d(V,"TABLE",{class:!0});var ge=g(z);H=d(ge,"THEAD",{});var Ue=g(H);U=d(Ue,"TR",{});var _e=g(U);T=d(_e,"TH",{class:!0});var Be=g(T);w=A(Be,"Name"),Be.forEach(c),W=C(_e),j=d(_e,"TH",{class:!0});var Le=g(j);te=A(Le,"Flavor text"),Le.forEach(c),x=C(_e),u=d(_e,"TH",{class:!0});var Oe=g(u);N=A(Oe,"Attacks"),Oe.forEach(c),_e.forEach(c),Ue.forEach(c),y=C(ge),G=d(ge,"TBODY",{});var Ce=g(G);for(let Pe=0;Pe<M.length;Pe+=1)M[Pe].l(Ce);Ce.forEach(c),ge.forEach(c),le=C(V),Y=d(V,"DIV",{class:!0});var he=g(Y);Q=d(he,"BUTTON",{class:!0});var Re=g(Q);B=A(Re,"Previous"),Re.forEach(c),X=C(he),Z=d(he,"SPAN",{});var ve=g(Z);o=A(ve,"Page "),P=A(ve,t[5]),I=A(ve," of "),oe=A(ve,t[2]),ve.forEach(c),ue=C(he),J=d(he,"BUTTON",{class:!0});var De=g(J);fe=A(De,"Next"),De.forEach(c),he.forEach(c),V.forEach(c),this.h()},h(){s.disabled=E=t[5]<=1,f(s,"class","svelte-1c3nn9x"),m.disabled=D=t[5]>=t[2],f(m,"class","svelte-1c3nn9x"),f(e,"class","page-number-selector svelte-1c3nn9x"),f(T,"class","svelte-1c3nn9x"),f(j,"class","svelte-1c3nn9x"),f(u,"class","svelte-1c3nn9x"),f(z,"class","svelte-1c3nn9x"),Q.disabled=re=t[5]<=1,f(Q,"class","svelte-1c3nn9x"),J.disabled=ce=t[5]>=t[2],f(J,"class","svelte-1c3nn9x"),f(Y,"class","page-number-selector svelte-1c3nn9x")},m(v,V){ee(v,a,V),l(a,e),l(e,s),l(s,F),l(e,p),l(e,k),l(k,i),l(k,r),l(k,_),l(k,n),l(e,b),l(e,m),l(m,R),l(a,q),l(a,z),l(z,H),l(H,U),l(U,T),l(T,w),l(U,W),l(U,j),l(j,te),l(U,x),l(U,u),l(u,N),l(z,y),l(z,G);for(let L=0;L<M.length;L+=1)M[L].m(G,null);l(a,le),l(a,Y),l(Y,Q),l(Q,B),l(Y,X),l(Y,Z),l(Z,o),l(Z,P),l(Z,I),l(Z,oe),l(Y,ue),l(Y,J),l(J,fe),K=!0,Ne||(Ae=[$(s,"click",t[12]),$(m,"click",t[11]),$(Q,"click",t[12]),$(J,"click",t[11])],Ne=!0)},p(v,V){if((!K||V&32&&E!==(E=v[5]<=1))&&(s.disabled=E),(!K||V&32)&&ne(r,v[5]),(!K||V&4)&&ne(n,v[2]),(!K||V&36&&D!==(D=v[5]>=v[2]))&&(m.disabled=D),V&2){ie=Object.entries(v[1]);let L;for(L=0;L<ie.length;L+=1){const pe=He(v,ie,L);M[L]?M[L].p(pe,V):(M[L]=Me(pe),M[L].c(),M[L].m(G,null))}for(;L<M.length;L+=1)M[L].d(1);M.length=ie.length}(!K||V&32&&re!==(re=v[5]<=1))&&(Q.disabled=re),(!K||V&32)&&ne(P,v[5]),(!K||V&4)&&ne(oe,v[2]),(!K||V&36&&ce!==(ce=v[5]>=v[2]))&&(J.disabled=ce)},i(v){K||(st(()=>{ae||(ae=qe(a,ye,{},!0)),ae.run(1)}),K=!0)},o(v){ae||(ae=qe(a,ye,{},!1)),ae.run(0),K=!1},d(v){v&&c(a),Qe(M,v),v&&ae&&ae.end(),Ne=!1,Ge(Ae)}}}function ze(t){var z,H;let a,e,s=t[27].name+"",F,E,p,k=t[27].flavorText+"",i,r,_,n=(((H=(z=t[27])==null?void 0:z.attacks)==null?void 0:H.map(We).reduce(Ye))||"")+"",b,m,R,D;function q(){return t[18](t[27])}return{c(){a=h("tr"),e=h("td"),F=S(s),E=O(),p=h("td"),i=S(k),r=O(),_=h("td"),b=S(n),m=O(),this.h()},l(U){a=d(U,"TR",{class:!0});var T=g(a);e=d(T,"TD",{class:!0});var w=g(e);F=A(w,s),w.forEach(c),E=C(T),p=d(T,"TD",{class:!0});var W=g(p);i=A(W,k),W.forEach(c),r=C(T),_=d(T,"TD",{class:!0});var j=g(_);b=A(j,n),j.forEach(c),m=C(T),T.forEach(c),this.h()},h(){f(e,"class","svelte-1c3nn9x"),f(p,"class","svelte-1c3nn9x"),f(_,"class","svelte-1c3nn9x"),f(a,"class","clickable svelte-1c3nn9x")},m(U,T){ee(U,a,T),l(a,e),l(e,F),l(a,E),l(a,p),l(p,i),l(a,r),l(a,_),l(_,b),l(a,m),R||(D=$(a,"click",q),R=!0)},p(U,T){var w,W;t=U,T&2&&s!==(s=t[27].name+"")&&ne(F,s),T&2&&k!==(k=t[27].flavorText+"")&&ne(i,k),T&2&&n!==(n=(((W=(w=t[27])==null?void 0:w.attacks)==null?void 0:W.map(We).reduce(Ye))||"")+"")&&ne(b,n)},d(U){U&&c(a),R=!1,D()}}}function Me(t){let a,e,s=t[23]+"",F,E,p,k=t[24],i=[];for(let r=0;r<k.length;r+=1)i[r]=ze(Ve(t,k,r));return{c(){a=h("tr"),e=h("th"),F=S(s),E=O();for(let r=0;r<i.length;r+=1)i[r].c();p=Te(),this.h()},l(r){a=d(r,"TR",{});var _=g(a);e=d(_,"TH",{colspan:!0,class:!0});var n=g(e);F=A(n,s),n.forEach(c),_.forEach(c),E=C(r);for(let b=0;b<i.length;b+=1)i[b].l(r);p=Te(),this.h()},h(){f(e,"colspan","3"),f(e,"class","svelte-1c3nn9x")},m(r,_){ee(r,a,_),l(a,e),l(e,F),ee(r,E,_);for(let n=0;n<i.length;n+=1)i[n].m(r,_);ee(r,p,_)},p(r,_){if(_&2&&s!==(s=r[23]+"")&&ne(F,s),_&2){k=r[24];let n;for(n=0;n<k.length;n+=1){const b=Ve(r,k,n);i[n]?i[n].p(b,_):(i[n]=ze(b),i[n].c(),i[n].m(p.parentNode,p))}for(;n<i.length;n+=1)i[n].d(1);i.length=k.length}},d(r){r&&c(a),r&&c(E),Qe(i,r),r&&c(p)}}}function dt(t){let a,e,s,F,E,p,k,i,r,_,n,b,m,R,D,q,z,H,U,T,w,W,j,te,x,u,N,y,G,le,Y,Q,B=t[4]&&je();const re=[ht,_t],X=[];function Z(o,P){return o[3]&&o[0]&&o[0].totalCount>0?0:o[3]?1:-1}return~(N=Z(t))&&(y=X[N]=re[N](t)),{c(){a=h("form"),e=h("div"),s=h("label"),F=S("Name:"),E=O(),p=h("input"),k=O(),i=h("label"),r=S("Attack name:"),_=O(),n=h("input"),b=O(),m=h("label"),R=S("Set:"),D=O(),q=h("input"),z=O(),H=h("label"),U=S("Flavor text:"),T=O(),w=h("textarea"),W=O(),j=h("button"),te=S("Search"),x=O(),B&&B.c(),u=O(),y&&y.c(),G=Te(),this.h()},l(o){a=d(o,"FORM",{});var P=g(a);e=d(P,"DIV",{class:!0});var I=g(e);s=d(I,"LABEL",{for:!0,class:!0});var oe=g(s);F=A(oe,"Name:"),oe.forEach(c),E=C(I),p=d(I,"INPUT",{id:!0,placeholder:!0,class:!0}),k=C(I),i=d(I,"LABEL",{for:!0,class:!0});var ue=g(i);r=A(ue,"Attack name:"),ue.forEach(c),_=C(I),n=d(I,"INPUT",{id:!0,placeholder:!0,class:!0}),b=C(I),m=d(I,"LABEL",{for:!0,class:!0});var J=g(m);R=A(J,"Set:"),J.forEach(c),D=C(I),q=d(I,"INPUT",{id:!0,placeholder:!0,class:!0}),z=C(I),H=d(I,"LABEL",{for:!0,class:!0});var fe=g(H);U=A(fe,"Flavor text:"),fe.forEach(c),T=C(I),w=d(I,"TEXTAREA",{id:!0,placeholder:!0,class:!0}),g(w).forEach(c),I.forEach(c),W=C(P),j=d(P,"BUTTON",{class:!0});var ce=g(j);te=A(ce,"Search"),ce.forEach(c),P.forEach(c),x=C(o),B&&B.l(o),u=C(o),y&&y.l(o),G=Te(),this.h()},h(){f(s,"for","name"),f(s,"class","field svelte-1c3nn9x"),f(p,"id","name"),f(p,"placeholder","Pikachu"),f(p,"class","svelte-1c3nn9x"),f(i,"for","attack-name"),f(i,"class","field svelte-1c3nn9x"),f(n,"id","attack-name"),f(n,"placeholder","Pika punch"),f(n,"class","svelte-1c3nn9x"),f(m,"for","set"),f(m,"class","field svelte-1c3nn9x"),f(q,"id","set"),f(q,"placeholder","Stormfront"),f(q,"class","svelte-1c3nn9x"),f(H,"for","flavor-text"),f(H,"class","field svelte-1c3nn9x"),f(w,"id","flavor-text"),f(w,"placeholder","It lives in forests with others"),f(w,"class","svelte-1c3nn9x"),f(e,"class","form-grid svelte-1c3nn9x"),f(j,"class","button-red-small submit svelte-1c3nn9x")},m(o,P){ee(o,a,P),l(a,e),l(e,s),l(s,F),l(e,E),l(e,p),se(p,t[6]),l(e,k),l(e,i),l(i,r),l(e,_),l(e,n),se(n,t[7]),l(e,b),l(e,m),l(m,R),l(e,D),l(e,q),se(q,t[8]),l(e,z),l(e,H),l(H,U),l(e,T),l(e,w),se(w,t[9]),l(a,W),l(a,j),l(j,te),ee(o,x,P),B&&B.m(o,P),ee(o,u,P),~N&&X[N].m(o,P),ee(o,G,P),le=!0,Y||(Q=[$(p,"input",t[14]),$(n,"input",t[15]),$(q,"input",t[16]),$(w,"input",t[17]),$(a,"submit",Ze(t[10]))],Y=!0)},p(o,[P]){P&64&&p.value!==o[6]&&se(p,o[6]),P&128&&n.value!==o[7]&&se(n,o[7]),P&256&&q.value!==o[8]&&se(q,o[8]),P&512&&se(w,o[9]),o[4]?B?P&16&&de(B,1):(B=je(),B.c(),de(B,1),B.m(u.parentNode,u)):B&&(Fe(),be(B,1,1,()=>{B=null}),we());let I=N;N=Z(o),N===I?~N&&X[N].p(o,P):(y&&(Fe(),be(X[I],1,1,()=>{X[I]=null}),we()),~N?(y=X[N],y?y.p(o,P):(y=X[N]=re[N](o),y.c()),de(y,1),y.m(G.parentNode,G)):y=null)},i(o){le||(de(B),de(y),le=!0)},o(o){be(B),be(y),le=!1},d(o){o&&c(a),o&&c(x),B&&B.d(o),o&&c(u),~N&&X[N].d(o),o&&c(G),Y=!1,Ge(Q)}}}function ke(t){return!(typeof t>"u")&&t!=null?decodeURI(t).trim():t}function Ee(t){return!(typeof t>"u")&&t!=null?t.trim():t}const We=t=>t.name,Ye=(t,a)=>t+", "+a;function pt(t,a,e){let s;xe(t,rt,u=>e(19,s=u));const{groupBy:F}=ot;let{pageContents:E}=a,p,k,i=!1,r=!1,_,n,b,m,R,D;function q(){e(6,b=Ee(b)),e(7,m=Ee(m)),e(8,R=Ee(R)),e(9,D=Ee(D));let u={};i&&(u.page=_),n!==20&&(u.pageSize=n),b&&(u.name=b),m&&(u.attackName=m),R&&(u.set=R),D&&(u.flavorText=D),typeof window<"u"&&it(u),e(4,r=!0),nt.getCardPage({page:_,pageSize:n,name:b,attackName:m,set:R,flavorText:D}).then(N=>{e(0,E=N),e(3,i=!0),e(4,r=!1)})}function z(){e(5,_=1),q()}function H(u){e(5,_=u),q()}function U(){H(_+1)}function T(){H(_-1)}$e(()=>{var u,N;e(5,_=parseInt((u=s.url.searchParams.get("page"))!=null?u:"1")),e(13,n=parseInt((N=s.url.searchParams.get("pageSize"))!=null?N:"20")),e(6,b=ke(s.url.searchParams.get("name"))),e(7,m=ke(s.url.searchParams.get("attackName"))),e(8,R=ke(s.url.searchParams.get("set"))),e(9,D=ke(s.url.searchParams.get("flavorText"))),(b||m||R||D||_!==1)&&q()});function w(){b=this.value,e(6,b)}function W(){m=this.value,e(7,m)}function j(){R=this.value,e(8,R)}function te(){D=this.value,e(9,D)}const x=u=>ct(ut+"/guess?cardId="+btoa(u.id));return t.$$set=u=>{"pageContents"in u&&e(0,E=u.pageContents)},t.$$.update=()=>{if(t.$$.dirty&1&&(E?e(1,p=F(E.data,u=>`${u.set.series} - ${u.set.name}`)):e(1,p={})),t.$$.dirty&8193&&E){let u=parseInt(E.totalCount/n);E.totalCount%n&&u++,e(2,k=u)}},[E,p,k,i,r,_,b,m,R,D,z,U,T,n,w,W,j,te,x]}class Pt extends Xe{constructor(a){super(),Je(this,a,pt,dt,Ke,{pageContents:0})}}export{Pt as default};
