import{S as u,i as p,s as _,l as h,x as g,m as b,p as C,y as w,h as i,b as y,z as P,f as S,t as $,C as k,M as D}from"../../chunks/index-2cb11f61.js";import{b as R}from"../../chunks/navigation-fbe70647.js";import{b as d}from"../../chunks/paths-b9644fda.js";import{C as q}from"../../chunks/CardGuess-a6e5790b.js";import{P as x}from"../../chunks/LoadingIcon-c8510d68.js";import"../../chunks/singletons-eca981c1.js";import"../../chunks/index-854bf481.js";import"../../chunks/Modal.svelte_svelte_type_style_lang-a6861bc3.js";import"../../chunks/Flippable-6fc86018.js";import"../../chunks/close-icon-2ac8c1d9.js";function z(m){let a,t,s,o={card:m[0]};return t=new q({props:o}),m[2](t),{c(){a=h("div"),g(t.$$.fragment)},l(r){a=b(r,"DIV",{});var n=C(a);w(t.$$.fragment,n),n.forEach(i)},m(r,n){y(r,a,n),P(t,a,null),s=!0},p(r,[n]){const e={};n&1&&(e.card=r[0]),t.$set(e)},i(r){s||(S(t.$$.fragment,r),s=!0)},o(r){$(t.$$.fragment,r),s=!1},d(r){r&&i(a),m[2](null),k(t)}}}function A(m,a,t){let{card:s}=a,o;async function r(){var c,l;let e=(l=(c=o==null?void 0:o.getDialog())==null?void 0:c.close())!=null?l:await Promise.resolve(),f=x.getRandomCard();await e,t(0,s=null),t(0,s=await f)}s==null&&r(),R(e=>{e.from!=null&&e.to!=null&&e.from.pathname===e.to.pathname&&(e.to.pathname===`${d}/guess/random`||e.to.pathname===`/${d}/guess/random`)&&(e.cancel(),r())});function n(e){D[e?"unshift":"push"](()=>{o=e,t(1,o)})}return m.$$set=e=>{"card"in e&&t(0,s=e.card)},[s,o,n]}class J extends u{constructor(a){super(),p(this,a,A,z,_,{card:0})}}export{J as default};
